Modeling and rebuilding F0 Trajectory with Quadratic in Mandarin
========

## Content

1.[目标](#1-目标)  
2.[找出一种最适合普通话陈述句基频曲线的拟合方案](#21-现有的基频曲线拟合算法在拟合普通话陈述句基频曲线上的优劣性)  
2.1 [现有的基频曲线拟合算法在拟合普通话陈述句基频曲线上的优劣性](#21-现有的基频曲线拟合算法在拟合普通话陈述句基频曲线上的优劣性)  
2.1.1[Fujisaki](#211-fujisaki)  
2.1.2[PENTA](#212-penta)  
2.2[句调曲线分离算法](#22-句调曲线分离)  
2.2.1[具体算法实现](#221-具体算法实现)  
2.2.2[使用的语料简介](#222-使用的语料简介)  
2.2.3[拟合结果](#223-拟合结果)  
2.3[二次曲线拟合算法](#23-二次曲线拟合算法)  
2.3.1[使用二次曲线拟合的合理性](#231-使用二次曲线拟合的合理性)  
2.3.2[具体算法实现](#232-具体算法实现)  
2.3.3[拟合结果的统计分析](#233-拟合结果的统计分析)  
2.3.4[结论](#234-结论)  
3.[利用二次曲线拟合算法建立一个快速的普通话陈述句基频曲线生成算法](#3-利用二次曲线拟合算法建立一个快速的普通话陈述句基频曲线生成算法)  
3.1[现有的基频曲线生成算法](#31-现有的基频曲线生成算法)  
3.2[使用的回归算法](#32使用的回归算法)  
3.3[直接对2.3.3得到的参数化结果进行学习](#33-直接对233得到的参数化结果进行学习)  
3.3.1[选取的特征和要学习的参数](#331-选取的特征和要学习的参数)  
3.3.2[实验结果](#332-实验结果)  
3.3.3[加入r1,r2作为特征](#333-加入r1r2作为特征)  
3.4[改进过的混合回归算法](#34-改进过的混合回归算法)  
3.4.1[对于线性、二次曲线拟合的分类标准](#341-对于线性二次曲线拟合的分类标准)  
3.4.2[对线性、二次曲线拟合的分类预测](#342-对线性二次曲线拟合的分类预测)  
3.4.3[分别使用线性、二次曲线对分类后的数据进行回归学习](#343-分别使用线性二次曲线对分类后的数据进行回归学习)  
3.4.4[对声音的后期调整](#344-对声音的后期调整)  
3.4.5[使用上述3节算法的最终生成结果](#345-使用上述3节算法的最终生成结果)  
4.[结论及改进方向](#4-结论及改进方向)  
4.1[结论](#41-结论)  
4.2[改进方向](#42-改进方向)  

================

## 1. 目标

* 找出一种最适合普通话陈述句的基频曲线参数化拟合方案
	* 应该能提炼出陈述句的一般下趋势，即句调曲线
	* 去除句调曲线以后应该只用一个表达式拟合一个字的基频曲线
	* 不应该太复杂，计算应该快速。
* 

## 2. 找出一种最适合普通话陈述句基频曲线的拟合方案

### 2.1 现有的基频曲线拟合算法在拟合普通话陈述句基频曲线上的优劣性

#### 2.1.1 Fujisaki

Fujisaki模型一开始为日语的基频曲线拟合设计的，后来在德语上的应用也取得了很好的成绩。但是日语、德语及绝大多数西欧语言的所有基本音节都是下倾语调，不能很好的拟合汉语中的三声，部分二四声调的不单调变化。用Fujisaki模型拟合汉语时，有时候甚至使用2个表达式中间的平滑部分来表示三声，这与一开始Fujisaki模型为日语设计时，一个日语字符对应一个表达式的思路矛盾。并且Fujisaki模型的表达式复杂，时间开销比较大。

#### 2.1.2 PENTA

### 2.2 句调曲线分离

#### 2.2.1 具体算法实现

1. 滤波
2. 线性拟合

#### 2.2.2 使用的语料简介

#### 2.2.3 拟合结果

1. 拟合结果示例
2. a,b的分布图

### 2.3 二次曲线拟合算法

#### 2.3.1 使用二次曲线拟合的合理性

1. 对原始基频曲线的分析
2. 对基频曲线的导数(一阶阶差)曲线的分析

#### 2.3.2 具体算法实现

1. 总体思路
2. 对野点(离群点)的时序无关去除算法

#### 2.3.3 拟合结果的统计分析

1. 去除句调曲线前后的拟合结果示例
2. r1-r2分布图
3. 按声调分类a,b,c各自的分布图

### 2.3.4 结论

二次曲线拟合算法可以很好的拟合普通话基频曲线。
句调曲线拟合算法可以表示出普通话陈述句的下倾趋势。

## 3. 利用二次曲线拟合算法建立一个快速的普通话陈述句基频曲线生成算法

### 3.1 现有的基频曲线生成算法

1. HTK

### 3.2 使用的回归算法

1. REPTree
2. 线性回归

### 3.3 直接对2.3.3得到的参数化结果进行学习

#### 3.3.1 选取的特征和要学习的参数

#### 3.3.2 实验结果

#### 3.3.3 加入r1,r2作为特征

1. 实验结果

直接使用r1,r2的实验结果

使用round(r1),round(r2)的实验结果

使用abs(r1),abs(r2)的实验结果

2. 对实验结果的分析

r1,r2描述了a,b之间的符号关系，a的可信度。  
所以加入以后对结果有极大的提升。

3. 引发的改进思路

根据r1,r2的分类回归，同时混合使用线性、二次曲线两种拟合方法。

### 3.4 改进过的混合回归算法

#### 3.4.1 对于线性、二次曲线拟合的分类标准

1. 分类标准

a过小，r1过小，对称轴位置过于接近或超出时间边界

2. 使用上述标准以后的拟合结果示例

红色是二次拟合的部分，绿色是线性拟合的部分

#### 3.4.2 对线性、二次曲线拟合的分类预测

1. 选取的特征和分类算法

2. 实验结果

### 3.4.3 分别使用线性、二次曲线对分类后的数据进行回归学习

1. 实验结果

2. 对实验结果的分析

分类后，的确较分类前各自的结果都有较大提升

### 3.4.4 对声音的后期调整

1. 音域缩放

### 3.4.5 使用上述3节算法的最终生成结果

1. 回归学习结果示例

红色是二次拟合的部分，绿色是线性拟合的部分

2. 实验结果

3. 主观评测结果

## 4. 结论及改进方向

### 4.1 结论

### 4.2 改进方向

1. 3.4.2一节可能和基频曲线的平滑有关系，即本来是线性的，由于平滑的作用显示出了二次线性。

2. 对声音的后期修正算法没有使用对称轴位置。
